<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>İlan Yayınla</title>
    <link th:href="@{/css/style.css}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>

    <nav class="navbar">
        <a href="/" class="brand" style="display: flex; align-items: center; gap: 2px;">
            <img th:src="@{/logo.jpeg}" alt="İşKapısı Logo" style="height: 65px; width: auto; border-radius: 8px;">
            <span style="font-weight: 800; color: var(--primary); letter-spacing: -0.5px;">İşKapısı</span>
        </a>

        <ul class="nav-links">
            <li><a href="/">İlanlar</a></li>
            
            <li th:if="${session.girisYapanKullanici != null and session.girisYapanKullanici.rol.name() == 'ISVEREN'}">
                <a href="/ilanlarim" style="color:var(--dark);">İlanlarım</a>
            </li>

            <li th:if="${session.girisYapanKullanici != null}">
                <a href="/profil" style="color:var(--dark);">Hesabım</a>
            </li>
            
            <li th:if="${session.girisYapanKullanici != null}"><a href="/cikis" style="color:#ef4444">Çıkış</a></li>

            <li th:if="${session.girisYapanKullanici != null and session.girisYapanKullanici.rol.name() == 'ISVEREN'}">
                <a href="/ilan-ekle" class="btn btn-outline">+ İlan Ver</a>
            </li>
        </ul>
    </nav>
    <div class="auth-wrapper" style="padding-top: 40px; align-items: flex-start;"> 
        <div class="auth-box" style="max-width: 800px;"> 
            <div style="text-align: center; margin-bottom: 30px;">
                <h2 style="color: var(--primary); margin-bottom: 10px;">Yeni İlan Oluştur</h2>
                <p style="color: #64748b;">Aradığınız yeteneği hemen bulun.</p>
            </div>

            <form action="/ilan-ekle" method="post">
                
                <div class="form-group">
                    <label>İlan Başlığı</label>
                    <input type="text" id="ilanBaslik" name="baslik" required placeholder="Örn: Kıdemli Java Geliştirici">
                </div>

                <div class="row">
                    <div class="col-half">
                        <div class="form-group">
                            <label>Şehir</label>
                            <input type="text" name="sehir" required placeholder="Örn: Ankara">
                        </div>
                    </div>
                    <div class="col-half">
                        <div class="form-group">
                            <label>Maaş (Opsiyonel)</label>
                            <input type="text" name="maas" placeholder="Örn: 30.000 TL">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>İş Tanımı ve Aranan Nitelikler</label>
                    
                    <div style="margin-bottom: 10px; text-align: right;">
                        <button type="button" onclick="aiIlanYaz()" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 5px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s;">
                            ✨ Yapay Zekaya Yazdır
                        </button>
                    </div>

                    <textarea id="ilanAciklama" name="aciklama" rows="12" required 
                        placeholder="İş hakkında detaylı bilgi verin veya başlığı yazıp yukarıdaki butona basın..."
                        style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem; outline: none; transition: 0.3s; font-family: inherit; resize: vertical;"></textarea>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px; font-size: 1.1rem;">İlanı Yayınla</button>
            </form>

            <div style="text-align: center; margin-top: 25px;">
                <a href="/" style="color: #94a3b8; text-decoration: none;">Vazgeç ve Dön</a>
            </div>
        </div>
    </div>

    <script th:src="@{/js/main.js}"></script>

</body>
</html>